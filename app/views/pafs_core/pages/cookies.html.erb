<% content_for :title, t("cookies.title") %>
<% content_for :meta_tags do %>
  <meta name="description" content="<%= t("cookies.title") %>" />
<% end %>

<div class="govuk-width-container">
  <main class="govuk-main-wrapper">

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        <div class="cookie-settings__confirmation" data-cookie-confirmation="true">
          <%= render "govuk_publishing_components/components/notice", {
            title: t("cookies.title"),
            aria_live: true,
          } do %>
            <p class="govuk-body"><%= t("cookies.settings_page.saved") %></p>
            <a class="govuk-link cookie-settings__prev-page" href="<%= previous_page %>">
              <%= t("cookies.settings_page.back") %>
            </a>
          <% end %>
        </div>

        <h1 class="govuk-heading-l"><%=t("cookies.title")%></h1>
        
        <p><%= t("cookies.settings_page.intro_html") %></p>

        <h2 class="govuk-heading-m"><%=t("cookies.title")%></h2>
        <p class="govuk-body"><%= t("cookies.settings_page.cookie_types") %></p>

        <h2 class="govuk-heading-m"><%=t("cookies.settings_page.cookies_measure_website_use.title")%></h2>
        <p><%= t("cookies.settings_page.cookies_measure_website_use.text_html") %></p>
        <ul class="govuk-list govuk-list--bullet">
          <% t("cookies.settings_page.ga_info").map do |cookie_item| %>
            <li><%= cookie_item[:text] %></li>
          <% end %>
        </ul>
        
        <form data-module="cookie-settings">
          <% t("cookies.settings_page.cookies").map do |cookie_item| %>
            <% cookies_usage_hint = capture do %><% end %>
            <%= render "govuk_publishing_components/components/radio", {
              name: cookie_item.dig(:cookie_options_name),
              inline: false,
              hint: (cookies_usage_hint),
              items: cookie_item.fetch(:cookie_options, []),
            } %>
          <% end %>

          <h2 class="govuk-heading-m"><%=t("cookies.settings_page.necessary_cookies.title")%></h2>
          <p><%= t("cookies.settings_page.necessary_cookies.text_html") %></p>

          <h2 class="govuk-heading-m"><%=t("cookies.settings_page.all_cookies.title")%></h2>
          <table class="govuk-table">
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header">Name</th>
                <th scope="col" class="govuk-table__header">Purpose</th>
                <th scope="col" class="govuk-table__header">Expires</th>
              </tr>
            </thead>
          <% t("cookies.cookies_list").map do |cookie_item| %>
            <tbody class="govuk-table__body">
              <tr class="govuk-table__row">
                <th class="govuk-table__cell"><%= cookie_item[0].dig(:text) %></th>
                <td class="govuk-table__cell"><%= cookie_item[1].dig(:text) %></td>
                <td class="govuk-table__cell"><%= cookie_item[2].dig(:text) %></td>
              </tr>
            </tbody>
          <% end %>
          </table>
          
          <h2 class="govuk-heading-m"><%=t("cookies.settings_page.third_party_cookies")%></h2>
          <p><%= t("cookies.settings_page.third_party_cookies_text") %></p>

          <table class="govuk-table">
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header">Name</th>
                <th scope="col" class="govuk-table__header">Purpose</th>
              </tr>
            </thead>
          <% t("cookies.third_party_cookies_list").map do |cookie_item| %>
            <tbody class="govuk-table__body">
              <tr class="govuk-table__row">
                <th class="govuk-table__cell"><%= cookie_item[0].dig(:text) %></th>
                <td class="govuk-table__cell"><%= cookie_item[1].dig(:text) %></td>
              </tr>
            </tbody>
          <% end %>
          </table>
          
          <p><%= t("cookies.settings_page.cookie_details_link_html") %></p>

          <%= render "govuk_publishing_components/components/button", {
            text: "Save changes"
          } %>
        </form>
      </div>
    </div>

  </main>
</div>